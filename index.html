<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C2B Payment Integration</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f9f9f9;
      color: #333;
    }
    h1, h2 {
      color: #0056b3;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      border-radius: 8px;
    }
    .button {
      display: inline-block;
      padding: 10px 20px;
      background-color: #0056b3;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      margin-top: 10px;
    }
    .button:hover {
      background-color: #003d80;
    }
    code {
      background-color: #f4f4f4;
      padding: 5px;
      border-radius: 4px;
    }
    pre {
      background-color: #f4f4f4;
      padding: 10px;
      border-radius: 5px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>C2B Payment Integration</h1>
    <p>This page demonstrates a Client-to-Business (C2B) payment process, including the request signature, order creation, and callback handling.</p>

    <h2>Step 1: Create Order</h2>
    <p>Use the API to create a payment order. Here is an example payload:</p>
    <pre>
{
  "appid": "853694808089634",
  "merch_code": "245445",
  "merch_order_id": "1670575560882",
  "notify_url": "http://your-server.com/v2/api/order-v2/mini/payment",
  "trade_type": "Checkout",
  "total_amount": "10.00",
  "trans_currency": "ETB",
  "business_type": "BuyGoods"
}
    </pre>
    <a href="javascript:void(0)" class="button" onclick="createOrder()">Create Order</a>

    <h2>Step 2: Sign Request</h2>
    <p>Prepare the request by:</p>
    <ul>
      <li>Sorting parameters alphabetically</li>
      <li>Joining key-value pairs with <code>&</code></li>
      <li>Signing the string with your private key</li>
    </ul>
    <p>Example prepared string:</p>
    <pre>
appid=853694808089634&business_type=BuyGoods&merch_code=245445&merch_order_id=1670575560882&notify_url=http://your-server.com/v2/api/order-v2/mini/payment&total_amount=10.00&trans_currency=ETB&trade_type=Checkout
    </pre>

    <h2>Step 3: Handle Callback</h2>
    <p>The payment server will send a callback to your <code>notify_url</code> endpoint. Sample payload:</p>
    <pre>
{
  "notify_url": "http://your-server.com/v2/api/order-v2/mini/payment",
  "appid": "853694808089634",
  "notify_time": "1670575472482",
  "merch_code": "245445",
  "merch_order_id": "1670575560882",
  "payment_order_id": "00801104C911443200001002",
  "total_amount": "10.00",
  "trans_currency": "ETB",
  "trade_status": "Completed",
  "trans_end_time": "1670575472000",
  "sign": "AOwWQF0QDg...",
  "sign_type": "SHA256WithRSA"
}
    </pre>

    <h2>Try it Yourself</h2>
    <p>Click the button below to simulate a payment callback:</p>
    <a href="javascript:void(0)" class="button" onclick="simulateCallback()">Simulate Callback</a>
  </div>

  <script>
    // Simulate Order Creation
    function createOrder() {
      alert("Order Created! Check your console for the payload.");
      console.log({
        appid: "853694808089634",
        merch_code: "245445",
        merch_order_id: "1670575560882",
        notify_url: "http://your-server.com/v2/api/order-v2/mini/payment",
        trade_type: "Checkout",
        total_amount: "10.00",
        trans_currency: "ETB",
        business_type: "BuyGoods"
      });
    }

    // Simulate Payment Callback
    function simulateCallback() {
      alert("Callback Received! Check your console for the payload.");
      console.log({
        notify_url: "http://your-server.com/v2/api/order-v2/mini/payment",
        appid: "853694808089634",
        notify_time: "1670575472482",
        merch_code: "245445",
        merch_order_id: "1670575560882",
        payment_order_id: "00801104C911443200001002",
        total_amount: "10.00",
        trans_currency: "ETB",
        trade_status: "Completed",
        trans_end_time: "1670575472000",
        sign: "AOwWQF0QDg...",
        sign_type: "SHA256WithRSA"
      });
    }
  </script>
</body>
</html>
